{"mappings":"YAEA,IAAMA,EAAO,CACXC,SAAUC,SAASC,cAAc,gBACjCC,cAAeF,SAASC,cAAc,+BACtCE,kBAAmBH,SAASC,cAAc,oCAKxCG,EAAe,EACfC,GAAgB,EAQpB,SAASC,IAVkB,IAWrBF,GAAuCC,EACzCE,QAAQC,IAAI,sBAIdC,YAAW,WAOXC,OAAOC,iBAAiB,UAAWC,GACnCZ,SAASa,KAAKC,UAAUC,IAAI,cAC5BR,QAAQC,IAAI,mBAPVJ,GAAgB,C,GAnBA,I,CA6BpB,SAASY,IACPN,OAAOO,oBAAoB,UAAWL,GACtCZ,SAASa,KAAKC,UAAUI,OAAO,cAC/BZ,G,CAeF,SAASM,EAAcO,GACL,WACCA,EAAEC,OAEjBb,QAAQC,IAAI,wCACZQ,I,CA/CJlB,EAAKI,cAAcS,iBAAiB,QAASK,GAC7ClB,EAAKK,kBAAkBQ,iBAAiB,SA6BxC,WACEJ,QAAQC,IAAI,2CACoBH,GAAhB,EAChBW,G,IA/BFlB,EAAKC,SAASY,iBAAiB,SAkC/B,SAAyBQ,GACnBA,EAAEE,gBAAkBF,EAAEG,QACxBN,G,IAlCJV,G","sources":["src/js/02-subscription.js"],"sourcesContent":["import '../css/modal.css';\n\nconst refs = {\n  backdrop: document.querySelector('.js-backdrop'),\n  closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n  subscribeModalBtn: document.querySelector('[data-action=\"subscribe-modal\"]'),\n};\n\nconst PROMP_DELAY = 3000;\nconst MAX_PROMP_ATTEMPTS = 3;\nlet promtCounter = 0;\nlet hasSubscribed = false;\n\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.subscribeModalBtn.addEventListener('click', onSubscriveModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\nopenModalWithDelay();\n\nfunction openModalWithDelay() {\n  if (promtCounter === MAX_PROMP_ATTEMPTS || hasSubscribed) {\n    console.log('Останнє логування!');\n    return;\n  }\n\n  setTimeout(() => {\n    onOpenModal();\n    promtCounter += 1;\n  }, PROMP_DELAY);\n}\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  document.body.classList.add('show-modal');\n  console.log('Сетап в роботі!');\n}\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  document.body.classList.remove('show-modal');\n  openModalWithDelay();\n}\n\nfunction onSubscriveModal() {\n  console.log('Вітаю, Ви підписалися на нашу розсилку!');\n  hasSubscribed = true;\n  onCloseModal();\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModal();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  const ESC_KEY = 'Escape';\n  const isEscKey = e.code === ESC_KEY;\n  if (isEscKey) {\n    console.log('Закриваємо модалку по натиску на ESC');\n    onCloseModal();\n  }\n}\n"],"names":["$17c4d76dc4129de1$var$refs","backdrop","document","querySelector","closeModalBtn","subscribeModalBtn","$17c4d76dc4129de1$var$promtCounter","$17c4d76dc4129de1$var$hasSubscribed","$17c4d76dc4129de1$var$openModalWithDelay","console","log","setTimeout","window","addEventListener","$17c4d76dc4129de1$var$onEscKeyPress","body","classList","add","$17c4d76dc4129de1$var$onCloseModal","removeEventListener","remove","e","code","currentTarget","target"],"version":3,"file":"02-subscription.30eb3ddf.js.map"}